<!DOCTYPE html>
<html lang="pl">
	<head>
		<meta charset="utf-8" />
		<title>Piętro 4</title>
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css" />
		<link rel="stylesheet" type="text/css" media="screen" href="../main.css" />
		<link rel="stylesheet" type="text/css" media="screen" href="./zagadki.css" />
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/devicons/devicon@v2.14.0/devicon.min.css" />
		<script type="module" src="pietro4.js"></script>
	</head>

	<body>
		<div class="header">
			<section class="hero is-flex-direction-row is-align-items-baseline">
				<div class="is-flex is-align-items-baseline">
					<p class="title is-size-5-mobile m-0 mr-5 mr-2-mobile">Piętro 4</p>
					<a class="is-size-5 is-size-6-mobile has-text-weight-bold" href="../kryjowka">Kryjówka</a>
				</div>
				<p class="subtitle is-size-6-mobile m-0">
					<span>Postęp:</span>
					<br class="is-hidden-tablet" /><span id="progress"></span><span>%</span>
				</p>
			</section>
		</div>
		<div class="content is-flex">
			<div id="container" class="container" hidden>
				<div class="code">
					<p class="has-text-justified">
    Twoim oczom ukazuje się długi korytarz zakończony pięcioma różnymi wyjściami. Na ciągnącej się wzdłuż korytarza ścianie zauważasz kilka wywieszonych obrazów. Każdy z nich przedstawia kawałek kodu w dobrze znanym ci języku. Pod każdym z dzieł widnieje opis o powtarzającym się formacie: "Fragment programu sterującego korytarzem nr ...". Zauważasz też że nad framugami drzwi wiszą kolejno numery od 1 do 5. Także framuga przez którą wszedłeś do pomieszczenia udekorowana jest tabliczką o numerze 0. Odwracając się w kierunku drzwi wejściowych zauważasz istotny szczegół, który pierwotnie umknął twojej uwadze. "SIEDZIBA FIRMY DEWELOPERSKIEJ <b>CLESHCH</b>". Dobrze wiesz że firma ta znana jest z wątpliwej jakości oferowanych usług, wykonywanych przez niedoświadczonych stażystów. Lepiej nie myśleć jaki kataklizm spotka to w pełni zautomatyzowane piętro w momencie awarii. Postanawiasz więc przeanalizować wywieszone fragmenty kodu i wyeliminować odpowiadające im wyjścia, jeśli możliwe będzie nieoczekiwane przerwanie wykonania się skryptu. Zadanie to jednak nie będzie aż tak trywialne. Niektóre funkcje zależą od pewnych nieznanych ci, z góry zdefiniowanych stałych. Musisz więc założyć najgorsze...
</p>

<p class="filename active">
    <i class="devicon-python-plain python"></i><span class="python">cleshch.py</span>
</p>
<div class="code-wrapper">
    <code class="active">
<span class="p">import</span> sys<br><br><br>


<span class="b">def</span> <span class="y">fib</span>(<span class="lb">n</span>: <span class="t">int</span>) -> <span class="t">int</span>:<br>
<div class="indent">
    <span><span class="p">assert</span> <span class="t">type</span>(n) <span class="b">is</span> <span class="t">int</span> <span class="b">and</span> n <span class="op">&lt;</span> <span class="lg">5000</span></span><br>
    <span><span class="p">return</span> <span class="lg">1</span> <span class="p">if</span> n <span class="b">in</span> (<span class="lg">0</span>, <span class="lg">1</span>) <span class="p">else</span> fib(n<span class="op">-</span><span class="lg">1</span>)<span class="op">+</span>fib(n<span class="op">-</span><span class="lg">2</span>)</span>
</div><br><br>


<span class="b">def</span> <span class="y">dictionary</span>() -> <span class="t">str</span>:<br>
<div class="indent">
    <span>a <span class="op">=</span> {<span class="lg">18</span>: <span class="o">'a'</span>, <span class="lg">17</span>: <span class="o">'b'</span>, <span class="lg">0</span>: <span class="o">'c'</span>, <span class="lg">12</span>: <span class="o">'d'</span>, <span class="lg">54</span>: <span class="o">'e'</span>, <span class="lg">5</span>: <span class="o">'f'</span>}</span><br>
    <span>b <span class="op">=</span> {<span class="lg">2</span>: <span class="o">'g'</span>, <span class="lg">1</span>: <span class="o">'h'</span>, <span class="lg">5</span>: <span class="o">'i'</span>, <span class="lg">47</span>: <span class="o">'j'</span>, <span class="lg">54</span>: <span class="o">'k'</span>, <span class="lg">5</span>: <span class="o">'l'</span>, <span class="lg">1</span>: <span class="o">'m'</span>, <span class="lg">12</span>: <span class="o">'n'</span>, <span class="lg">5</span>: <span class="o">'o'</span>}</span><br>
    <span>c <span class="op">=</span> a <span class="op">|</span> b</span><br>
    <span>c[<span class="lg">12</span>] <span class="op">=</span> <span class="o">' '</span></span><br>
    <span>new_dict <span class="op">=</span> <span class="t">dict</span>(<span class="y">zip</span>(c.values(), c.keys()))</span><br>
    <span><span class="op">*</span>arr, x, d <span class="op">=</span> new_dict</span><br>
    <span>arr <span class="op">+=</span> [<span class="o">'!'</span>]</span><br>
    <span><span class="p">assert</span> <span class="b">not</span> arr <span class="b">is</span> [<span class="o">'a'</span>, <span class="o">'b'</span>, <span class="o">'c'</span>, <span class="o">' '</span>, <span class="o">'k'</span>, <span class="o">'o'</span>, <span class="o">'g'</span>]</span><br>
    <span><span class="p">return</span> <span class="o">''</span>.join(arr[<span class="op">-</span><span class="lg">2</span>:<span class="op">-</span><span class="lg">4</span>:<span class="op">-</span><span class="lg">1</span>])<span class="op">+</span><span class="o">''</span>.join(arr[<span class="lg">3</span>:<span class="lg">0</span>:<span class="op">-</span><span class="lg">2</span>])<span class="op">+</span><span class="o">''</span>.join(arr[<span class="lg">0</span>:<span class="lg">5</span>:<span class="lg">2</span>])</span>
</div><br><br>


<span class="b">def</span> <span class="y">subset</span>(<span class="lb">A</span>):<br>
<div class="indent">
    <span><span class="b">def</span> <span class="y">s</span>(<span class="lb">x</span>): <span class="p">return</span> [[y <span class="p">for</span> j, y <span class="p">in</span> <span class="y">enumerate</span>(<span class="t">set</span>(x)) <span class="p">if</span> (i <span class="op">>></span> j) <span class="op">&</span> <span class="lg">1</span>]</span><br>
        <div class="indent">
            <span><span class="p">for</span> i <span class="p">in</span> <span class="y">range</span>(<span class="lg">2</span><span class="op">**</span><span class="y">len</span>(<span class="t">set</span>(x)))]  <span class="g"># calculate all the the subsets</span></span>
        </div>
    <span><span class="b">def</span> <span class="y">q</span>(<span class="lb">l</span>): <span class="p">return</span> q([x <span class="p">for</span> x <span class="p">in</span> l[<span class="lg">1</span>:] <span class="p">if</span> x <span class="op">&lt;=</span> l[<span class="lg">0</span>]]) <span class="op">+</span> [l[<span class="lg">0</span>]] <span class="op">+</span> \</span><br>
        <div class="indent">
            <span>q([x <span class="p">for</span> x <span class="p">in</span> l <span class="p">if</span> x <span class="op">></span> l[<span class="lg">0</span>]]) <span class="p">if</span> l <span class="p">else</span> []  <span class="g"># sort every one of them</span></span>
        </div>
    <span>c <span class="op">=</span> [q(c) <span class="p">for</span> c <span class="p">in</span> s(A)]</span><br>
    <span><span class="p">assert</span> c[<span class="lg">2</span><span class="op">**</span><span class="y">len</span>(A)<span class="op">-</span><span class="lg">1</span>][<span class="op">-</span><span class="lg">1</span>] <span class="op">==</span> <span class="y">max</span>(A)</span><br>
    <span><span class="p">return</span> c</span>
</div><br><br>


<span class="b">class</span> <span class="t">eApproximation</span>:<br>
<div class="indent">
    <span><span class="lb">__slots__</span> <span class="op">=</span> <span class="o">'lastN'</span>, <span class="o">'e1Res'</span></span><br><br>

    <span><span class="g"># generator for factorials</span></span><br>
    <span><span class="b">def</span> <span class="y">fgen</span>(<span class="lb">self</span>, <span class="lb">n</span>: <span class="t">int</span>) -> <span class="t">int</span>:</span><br>
    <div class="indent">
        <span>fact <span class="op">=</span> <span class="lg">1</span></span><br>
        <span><span class="p">yield</span> fact</span><br>
        <span><span class="p">for</span> x <span class="p">in</span> <span class="y">range</span>(<span class="lg">1</span>, n):</span><br>
        <div class="indent">
            <span>fact <span class="op">*=</span> x</span><br>
            <span><span class="p">yield</span> fact</span>
        </div>
    </div><br>

    <span><span class="g"># first method</span></span><br>
    <span><span class="b">def</span> <span class="y">e1</span>(<span class="lb">self</span>, <span class="lb">n</span>: <span class="t">int</span>) -> <span class="t">float</span>:</span><br>
    <div class="indent">
        <span><span class="p">assert</span> <span class="b">not</span> n <span class="b">is</span> <span class="lg">0</span></span><br>
        <span><span class="p">return</span> (<span class="lg">1</span><span class="op">+</span><span class="lg">1</span><span class="op">/</span>n)<span class="op">**</span>n</span>
    </div><br>

    <span><span class="g"># second method</span></span><br>
    <span><span class="b">def</span> <span class="y">e2</span>(<span class="lb">self</span>, <span class="lb">n</span>: <span class="t">int</span>) -> <span class="t">float</span>:</span><br>
    <div class="indent">
        <span><span class="p">return</span> <span class="y">sum</span>([<span class="lg">1</span><span class="op">/</span>x <span class="p">for</span> x <span class="p">in</span> <span class="lb">self</span>.fgen(n)])</span>
    </div><br>
        
    <span><span class="b">def</span> <span class="y">approximate</span>(<span class="lb">self</span>, <span class="lb">n</span>: <span class="t">int</span>, <span class="lb">both</span><span class="op">=</span><span class="b">False</span>) -> <span class="t">float</span>:</span><br>
    <div class="indent">
        <span><span class="lb">self</span>.lastN <span class="op">=</span> n</span><br>
        <span><span class="lb">self</span>.e1Res <span class="op">=</span> <span class="lb">self</span>.e1(n)</span><br>
        <span><span class="p">while</span> both:</span><br>
        <div class="indent">
            <span><span class="lb">self</span>.e2Res <span class="op">=</span> <span class="lb">self</span>.e2(n)</span><br>
            <span><span class="p">return</span> [<span class="lb">self</span>.e1Res, <span class="lb">self</span>.e2Res]</span><br>
        </div>
        <span><span class="p">return</span> [<span class="lb">self</span>.e1Res]</span>
    </div>
</div><br><br>


<span><span class="b">def</span> <span class="y">main</span>(<span class="lb">x</span>, <span class="lb">A</span>, <span class="lb">y</span>, <span class="lb">b</span>):</span><br>
<div class="indent">
    <span><span class="p">try</span>:</span><br>
    <div class="indent">
        <span><span class="y">print</span>(x, A, y, b)</span><br>
        <span>sys.setrecursionlimit(<span class="lg">10000</span>)</span><br>
        <span><span class="y">print</span>(<span class="b">f</span><span class="o">'fibbonaci number for n=</span>{x}<span class="o">: </span>{fib(x)}<span class="o">'</span>)</span><br>
        <span><span class="y">print</span>(<span class="b">f</span><span class="o">'All subsets for A=</span>{A}<span class="o">: </span>{subset(A)}<span class="o">'</span>)</span><br>
        <span>e <span class="op">=</span> eApproximation()</span><br>
        <span><span class="y">print</span>(<span class="b">f</span><span class="o">'Approximation of e for n=</span>{y}<span class="o">: </span>{e.approximate(y, b)}<span class="o">'</span>)</span><br>
        <span><span class="y">print</span>(<span class="b">f</span><span class="o">'Final message: </span>{dictionary()}<span class="o">'</span>)</span><br>
    </div>
    <span><span class="p">except</span> <span class="t">AssertionError</span>:</span><br>
    <div class="indent">
        <span><span class="y">print</span>(<span class="lg">1</span>)</span><br>
        <span>sys.exit(<span class="lg">1</span>)</span><br>
    </div>
    <span><span class="p">except</span> <span class="t">AttributeError</span>:</span><br>
    <div class="indent">
        <span><span class="y">print</span>(<span class="lg">2</span>)</span><br>
        <span>sys.exit(<span class="lg">2</span>)</span><br>
    </div>
    <span><span class="p">except</span> <span class="t">ZeroDivisionError</span>:</span><br>
    <div class="indent">
        <span><span class="y">print</span>(<span class="lg">3</span>)</span><br>
        <span>sys.exit(<span class="lg">3</span>)</span><br>
    </div>
    <span><span class="p">except</span> <span class="t">RecursionError</span>:</span><br>
    <div class="indent">
        <span><span class="y">print</span>(<span class="lg">4</span>)</span><br>
        <span>sys.exit(<span class="lg">4</span>)</span><br>
    </div>
    <span><span class="p">except</span> <span class="t">IndexError</span>:</span><br>
    <div class="indent">
        <span><span class="y">print</span>(<span class="lg">5</span>)</span><br>
        <span>sys.exit(<span class="lg">5</span>)</span>
    </div>
</div><br><br>


<span class="p">if</span> <span class="lb">__name__</span> <span class="op">==</span> <span class="o">'__main__'</span>:<br>
<div class="indent">
    <span>main(<span class="lg">1</span>, [<span class="lg">1</span>, <span class="lg">2</span>, <span class="lg">3</span>], <span class="lg">1</span>, <span class="b">False</span>)</span>
</div>
    </code>
</div>

<label for="answer">Numer drzwi, przez które musi przejść Marcin</label>
					<div class="is-flex">
						<input id="answer" type="text" />
						<button id="check-button">Sprawdź</button>
					</div>
					<p id="wrong-message" class="is-size-7" hidden><i>Błędna odpowiedź</i></p>
					<div id="correct-message" hidden>
						<p class="is-size-7"><i>Poprawna odpowiedź</i></p>
						<a href="../kryjowka">Przejdź dalej</a>
					</div>
				</div>
			</div>
			<p id="locked-message" class="has-text-centered">Jeszcze nie dotarłeś do tego piętra</p>
		</div>
	</body>
</html>
